<h1>Hostels#new</h1>
<h1>宿登録</h1>

<%= form_with(model: @hostel, local: true) do |form| %>
  <% if @hostel.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(hostel.errors.count, "error") %> prohibited this guest from being saved:</h2>

      <ul>
      <% hostel.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="actions">
    <%= form.label :宿名 %>
    <%= form.text_field :name, placeholder: "宿名" %>
    <br>
    <br>
    <%= form.label :住所 %>
    <%= form.text_field :address, placeholder: "住所" %>
    <br>
    <br>
    <div id="map"></div>
    <%= form.label :部屋種類 %><br />
    <%= form.select :kind, Hostel.kinds.keys, {prompt: "選択"} %>
    <br>
    <br>
    <%= form.label :市内までの距離 %>
    <%= form.number_field :walk_city_time, placeholder: "市内までの距離" %>
    <br>
    <br>
    <%= form.label :１泊の値段 %>
    <%= form.number_field :prise %>〜　から
    <br>
    <br>
    <%= form.label :詳細 %>
    <%= form.text_area :details, placeholder: "詳細" %>
    <br>
    <br>
    <%= form.label :宿周辺情報 %>
    <%= form.text_area :around_information, placeholder: "宿周辺情報" %>
    <br>
    <br>
    <%= form.label :国 %>
    <%= form.text_field :country, placeholder: "国" %>
    <br>
    <br>
    <%= form.label :部屋数 %>
    <%= form.number_field :capacity %>部屋
    <br>
    <br>
    <%= form.label :phone_number %>
    <%= form.text_field :phone_number, placeholder: "電話番号" %>
    <br>
    <br>
    <%= form.label :image %><br/>
    <%= form.file_field :image %>
    <%= form.submit %>
  <% end %>
  </div>
    
  <script>
const geocoder = new google.maps.Geocoder()

map = new google.maps.Map(
    document.getElementById('map'), {
        center: {
            lat: <%= @hostel.latitude || 0 %>, 
            lng: <%= @hostel.longitude || 0 %>, 
        },
        zoom: 12,
    }
);

marker = new google.maps.Marker({
    position:  {
        lat: <%= @hostel.latitude || 0 %>, 
        lng: <%= @hostel.longitude || 0 %>,
    },
    map: map
});
</script>